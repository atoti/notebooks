"use strict";(self.webpackChunkuploadwidget_extension=self.webpackChunkuploadwidget_extension||[]).push([[713,179],{1713:(e,t,o)=>{o.r(t),o.d(t,{default:()=>b});var n=o(7622),l=o.n(n),r=o(8537),s=o.n(r),a=o(6497),i=o.n(a);o(8838);var c=o(9807),u=o.n(c),d=o(7896),p=(o(4831),o(2883)),L=o.n(p),m=(o(1784),o(9707)),f=o.n(m),g=o(1975),y=o(3534),h=o(9644),v=o.n(h),w=o(286),E=o.n(w);const k="portfolioUploader",M=[{...{Component:e=>{const t=(0,a.useRef)(null),[o,n]=(0,a.useState)(),l=(0,g.useDataModels)();if(1!==Object.keys(l).length)return i().createElement("div",null,"Not implemented for multiple servers yet.");const r=Object.keys(l)[0],s=`${(0,g.useActivePivotClient)(r).url}/atoti/pyapi`,c={beforeUpload:e=>(n(e),!0),multiple:!1,customRequest:async({onSuccess:e,onError:t})=>{E().parse(o,{complete:async o=>{console.log("Finished:",o.data),v().post(`${s}/upload/portfolio`,{portfolio:o.data}).then((t=>{null==e||e("OK",t.request),f().success("Portfolio(s) uploaded successfully."),console.log("Response",t)})).catch((e=>{const o=new Error("Some error");null==t||t(o,e),f().error("Error encountered during uploading of portfolio(s).")}))}})}};return i().createElement("div",{ref:t,style:{padding:"20px",height:"100%",width:"100%"}},i().createElement(u(),(0,d.Z)({},c,{accept:".csv"}),i().createElement(L(),{icon:i().createElement(y.Z,null),type:"primary"},"Upload")))},Icon:()=>i().createElement("svg",{height:"32",width:"44",viewBox:"0 0 32 32"},i().createElement("path",{d:"M 6 3 L 6 29 L 26 29 L 26 9.5996094 L 25.699219 9.3007812 L 19.699219 3.3007812 L 19.400391 3 L 6 3 z M 8 5 L 18 5 L 18 11 L 24 11 L 24 27 L 8 27 L 8 5 z M 20 6.4003906 L 22.599609 9 L 20 9 L 20 6.4003906 z M 16 13 L 12 17 L 15 17 L 15 22 L 17 22 L 17 17 L 20 17 L 16 13 z M 12 23 L 12 25 L 20 25 L 20 23 L 12 23 z"})),initialState:{widgetKey:k},key:k,translations:{"en-US":{key:"PortfolioUploader",defaultName:"Upload portfolio"}}},menuItems:["remove-widget"]}],U={widget:l()(M,"key")},b={async activate(e){var t;t=e.pluginRegistry,s()(t.widget,U.widget)}}}}]);