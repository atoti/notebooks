"use strict";(self.webpackChunkuploadwidget_extension=self.webpackChunkuploadwidget_extension||[]).push([[469,179],{6469:(e,t,o)=>{o.r(t),o.d(t,{default:()=>U});var n=o(7622),r=o.n(n),i=o(8537),l=o.n(i),s=o(242),a=o(7538);var d=o(657),c=o.n(d),p=o(6193),u=o.n(p),L=o(7667),h=o.n(L),f=o(1729),g=o(4128),y=o(9644),m=o.n(y),v=o(286),w=o.n(v);const k="portfolioUploader",Z=[{...{Component:e=>{const t=(0,s.useRef)(null),[o,n]=(0,s.useState)(),r=(0,f.useDataModels)();if(1!==Object.keys(r).length)return(0,a.tZ)("div",{children:"Not implemented for multiple servers yet."});const i=Object.keys(r)[0],l=`${(0,f.useActivePivotClient)(i).url}/atoti/pyapi`,d={beforeUpload:e=>(n(e),!0),multiple:!1,customRequest:async({onSuccess:e,onError:t})=>{w().parse(o,{complete:async o=>{console.log("Finished:",o.data),m().post(`${l}/upload/portfolio`,{portfolio:o.data}).then((t=>{null==e||e("OK",t.request),h().success("Portfolio(s) uploaded successfully."),console.log("Response",t)})).catch((e=>{const o=new Error("Some error");null==t||t(o,e),h().error("Error encountered during uploading of portfolio(s).")}))}})}};return(0,a.tZ)("div",{ref:t,style:{padding:"20px",height:"100%",width:"100%"},children:(0,a.tZ)(c(),{...d,accept:".csv",children:(0,a.tZ)(u(),{icon:(0,a.tZ)(g.Z,{}),type:"primary",children:"Upload"})})})},Icon:()=>(0,a.tZ)("svg",{height:"32",width:"44",viewBox:"0 0 32 32",children:(0,a.tZ)("path",{d:"M 6 3 L 6 29 L 26 29 L 26 9.5996094 L 25.699219 9.3007812 L 19.699219 3.3007812 L 19.400391 3 L 6 3 z M 8 5 L 18 5 L 18 11 L 24 11 L 24 27 L 8 27 L 8 5 z M 20 6.4003906 L 22.599609 9 L 20 9 L 20 6.4003906 z M 16 13 L 12 17 L 15 17 L 15 22 L 17 22 L 17 17 L 20 17 L 16 13 z M 12 23 L 12 25 L 20 25 L 20 23 L 12 23 z"})}),initialState:{widgetKey:k},key:k,translations:{"en-US":{key:"PortfolioUploader",defaultName:"Upload portfolio"}}},menuItems:["remove-widget"]}],M={widget:r()(Z,"key")},U={async activate(e){var t;t=e.pluginRegistry,l()(t.widget,M.widget)}}}}]);